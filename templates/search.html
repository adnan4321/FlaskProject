{% extends 'base.html' %}

{% block head %}
<title>Search</title>
{% endblock %}

{% block body %}
<br>
<form action="/search" method="post">
    <input type="search" name="s_id" placeholder="Enter Employee ID">
    <input type="search" name="s_name" placeholder="Enter Employee Name">
    <button type="submit" class="btn btn-primary" >Search</button>
</form>
<br>
<hr>
{% if search_emp %}
<table class="table">
    <thead class="thead-light">
        <tr>
            <th>ID</th><th>Name</th>
            <th>User Type</th><th>Date of Birth</th><th>Date of Joining</th>
            <th>Exp (yrs)</th><th>Projects</th><th>Skill Sets</th>
        </tr>
    </thead>
    <tbody>
    {% for data in search_emp %}
    <tr class="align-middle">
        <th scope="row">{{data.id}}</th>
        <td>{{data.name}}</td>
        <td>{{data.usertype}}</td>
        <td>{{data.dob}}</td>
        <td>{{data.doj}}</td>
        <td>{{data.yoe}}</td>
        <td>{{data.projects}}</td>
        <td>{{data.skill_set}}</td>
        {% if current_user.data.usertype == 'Admin' %}
            <td><a class="btn btn-outline-dark col-auto" href="/edit/{{data.id}} ">EDIT</a></td>
            {% if current_user.user_id != data.id %}
                <td><a class="btn btn-outline-dark col-auto" href="/delete/{{data.id}} ">DELETE</a></td>
            {% endif %}
        {% endif %}
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
    {% if flag==1 %}
         <!-- Danger Alert -->
        <div class="alert alert-danger alert-dismissible fade show">
            <strong>Details not found!</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endif %}
{% endif %}
<br>
{% if current_user.data.usertype == 'Admin' %}
    <a class="btn btn-outline-dark col-auto" href="/list">VIEW ALL</a>
{% endif %}
    <a class="btn btn-outline-dark" href="/">HOMEPAGE</a>

{% endblock %}